#!/bin/sh
APPLICATION_DIRS="~/Applications /Applications /Applications/MacPorts/VimCocoa /Applications/MacPorts/Vim"

# Lookup for normal Vim.app
if [ -z "$VIM_APP" ]; then
	for i in $APPLICATION_DIRS
	do
		if [ -x "$i/Vim.app" ]; then
			VIM_APP="open -a $i/Vim.app/Contents/MacOS/Vim"
			break
		fi
	done
fi

# Lookup for MacVim.app
if [ -z "$VIM_APP" ]; then
	for i in $APPLICATION_DIRS
	do
		if [ -x "$i/MacVim.app" ]; then
			VIM_APP="exec $i/MacVim.app/Contents/MacOS/Vim -g"
			break
		fi
	done
fi

# Boot up the Vim
if [ -z "$VIM_APP" ]; then
	exec vi -g ${1:+"$@"} &
else
	$VIM_APP ${1:+"$@"}
fi
